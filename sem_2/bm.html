<HTML lang="en">
<BODY>

<canvas id='lab02' width='500px' height='500px'>
</canvas>
<script>
    function bresenham_line(xstart, ystart, xend, yend) {
        /*
         * xstart, ystart - начало;
         * xend, yend - конец;
         */
        ctx.fillStyle = '#002eff';
        let dx = xend - xstart;
        let dy = yend - ystart;
        let incx = Math.sign(dx);
        /*
         * Определяем, в какую сторону нужно будет сдвигаться. Если dx < 0, т.е. отрезок идёт
         * справа налево по иксу, то incx будет равен -1.
         * Это будет использоваться в цикле постороения.
         */
        let incy = Math.sign(dy);
        /*
         * Аналогично. Если рисуем отрезок снизу вверх -
         * это будет отрицательный сдвиг для y (иначе - положительный).
         */
        dx = Math.abs(dx);  //далее мы будем сравнивать: "if (dx < dy)"
        dy = Math.abs(dy);  //поэтому необходимо сделать dx = |dx|; dy = |dy|
        let pdx, pdy, es, el;
        if (dx > dy) { //определяем наклон отрезка:
            /*
             * Если dx > dy, то значит отрезок "вытянут" вдоль оси икс, т.е. он скорее длинный, чем высокий.
             * Значит в цикле нужно будет идти по икс (строчка el = dx;), значит "протягивать" прямую по иксу
             * надо в соответствии с тем, слева направо и справа налево она идёт (pdx = incx;), при этом
             * по y сдвиг такой отсутствует.
             */
            pdx = incx;
            pdy = 0;
            es = dy;
            el = dx;
        } else {//случай, когда прямая скорее "высокая", чем длинная, т.е. вытянута по оси y

            pdx = 0;
            pdy = incy;
            es = dx;
            el = dy;//тогда в цикле будем двигаться по y
        }
        let x = xstart;
        let y = ystart;
        let err = 0;
        //ctx.fillRect(x, y, 1, 1);
        for (let t = 0; t <= el; t++) {//идём по всем точкам, начиная со второй и до последней
            err += 2 * es;
            if (Math.abs(err) >= es) {
                err -= 2 * el;
                x += incx;//сдвинуть прямую (сместить вверх или вниз, если цикл проходит по иксам)
                y += incy;//или сместить влево-вправо, если цикл проходит по y
            } else {
                x += pdx;//продолжить тянуть прямую дальше, т.е. сдвинуть влево или вправо, если
                y += pdy;//цикл идёт по иксу; сдвинуть вверх или вниз, если по y
            }
            ctx.fillRect(x, y, 1, 1);
        }

    }

</script>

<script>

    var canvas = document.getElementById('lab02');
    var ctx = canvas.getContext('2d');
    const x0 = 100, y0 = 100;
    let a = 0;
    const l = 100;
    bresenham_line(x0,y0,200,100)
    // setInterval(function () {
    //     let x1 = x0 + Math.trunc(l * Math.cos(a * Math.PI / 180));
    //     let y1 = y0 + Math.trunc(l * Math.sin(a * Math.PI / 180));
    //     bresenham_line(x0, y0, x1,y1);
    //     a+=0.1;
    //
    // }, 20);


</script>


</BODY>
</HTML>